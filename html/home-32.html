<!-- Landing hero header -->
<div id="landingpage">
  <div class="main-head" id="main-head">
    <div class="main-center" id="marketing-titles">
      <h1 class="marketing-header">A unique and affordable way to travel.</h1>
      <div class="marketing-wrapper">
        <!-- Selection Tabs -->
        <ul class="sl-nav" id="tab-search-selection">
          <li><a class="sl-tabs sl-tab-rentals" data-name="rentals" data-toggle="tab" href="#rentals">Place Rentals</a></li>
          <li><a class="sl-tabs sl-tab-rides bdr-left" data-name="rides" data-toggle="tab" href="#rides">Rideshares</a></li>
          <li><a class="sl-tabs sl-tab-experiences bdr-left" data-name="experiences" data-toggle="tab" href="#experiences">Experiences</a></li>
        </ul>
        <!-- Selection Content -->
        <div class="tab-content">
          <div class="tab-pane" id="rentals">
            <div class="marketing-titles">
              <h2 class="marketing-sub">Rent from over <span id="renCountPlace">400,000</span> short term and vacation rentals in <span id="renCountCity">40,000</span> cities.</h2>
            </div>
            <div class="css-main-search">
              <div class="inner-search">
                <div class="search-bar-wrapper">
                  <form class="form-inline" id="sl-hou-searchForm">
                    <div class="inner-form row-fluid">
                      <div class="input-wrapper">
                        <input class="css-input-sea" id="sl-hou-dest-location-input" type="text" autocomplete="off" placeholder="Where do you want to go ?" required>
                      </div>
                      <div class="input-wrapper hir-comp">
                        <span class="add-on calendar-prepend"><i class="icon-calendar"></i></span>
                        <input class="input-small sl-hou-from-date" id="sl-hou-sdate-input" autocomplete="off" placeholder="Check in" type="text">
                      </div>
                      <div class="input-wrapper hir-comp">
                        <span class="add-on calendar-prepend"><i class="icon-calendar"></i></span>
                        <input class="input-small sl-hou-to-date" autocomplete="off" placeholder="Check out" id="sl-hou-edate-input" type="text">
                      </div>
                      <div class="input-wrapper hir-comp">
                        <select class="sl-hou-guest-input" id="sl-hou-guest-input">
                          <option value="1">1 guest</option>
                          <option value="2">2 guests</option>
                          <option value="3">3 guests</option>
                          <option value="4">4 guests</option>
                          <option value="5">5 guests</option>
                          <option value="6">6 guests</option>
                          <option value="7">7 guests</option>
                          <option value="8">8 guests</option>
                          <option value="9">9 guests</option>
                          <option value="10">10 guests</option>
                          <option value="11">11 guests</option>
                          <option value="12">12 guests</option>
                          <option value="13">13 guests</option>
                          <option value="14">14 guests</option>
                          <option value="15">15 guests</option>
                          <option value="16">16+ guests</option>
                        </select>
                      </div>
                      <button class="css-searchit" id="hou-searchIt" type="submit">
                        <span class="icon-search css-searchicon"></span>&nbsp;Search
                      </button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
          <div class="tab-pane" id="rides">
            <div class="marketing-titles">
              <h2 class="marketing-sub">Find local, commuter, or long distance rides and carpooling in over 7,000 cities.</h2>
            </div>
            <div class="css-main-search">
              <div class="inner-search">
                <div class="search-bar-wrapper">
                  <form class="form-inline" id="sl-rid-searchForm">
                    <div class="inner-form row-fluid">
                      <div class="input-wrapper">
                        <input class="css-input-sea" id="sl-rid-orig-location-input" type="text" autocomplete="off" placeholder="Departure city">
                      </div>
                      <div class="input-wrapper hir-comp">
                        <i class="icon-long-arrow-right hp-arrow"></i>
                      </div>
                      <div class="input-wrapper">
                        <input class="css-input-sea" id="sl-rid-dest-location-input" type="text" autocomplete="off" placeholder="Destination city">
                      </div>
                      <div class="input-wrapper hir-comp">
                        <span class="add-on calendar-prepend"><i class="icon-calendar"></i></span>
                        <input class="input-small sl-rid-from-date" id="sl-rid-sdate-input" autocomplete="off" placeholder="Departure" type="text">
                      </div>
                      <div class="input-wrapper hir-comp">
                        <select class="sl-rid-guest-input" id="sl-rid-guest-input">
                          <option value="1">1 seat</option>
                          <option value="2">2 seats</option>
                          <option value="3">3 seats</option>
                          <option value="4">4 seats</option>
                          <option value="5">5 seats</option>
                        </select>
                      </div>
                      <button class="css-searchit" id="rid-searchIt" type="submit">
                        <span class="icon-search css-searchicon"></span>&nbsp;Search
                      </button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
          <div class="tab-pane" id="experiences">
            <div class="marketing-titles">
              <h2 class="marketing-sub">Find activities, tours, and memorable things to do, all hosted by local people in over 400 cities.</h2>
            </div>
            <div class="css-main-search">
              <div class="inner-search">
                <div class="search-bar-wrapper">
                  <form class="form-inline" id="sl-exp-searchForm">
                    <div class="inner-form row-fluid">
                      <div class="input-wrapper">
                        <input class="css-input-sea" id="sl-exp-dest-location-input" type="text" autocomplete="off" placeholder="Find something to do in.." required>
                      </div>
                      <button class="css-searchit" id="exp-searchIt" type="submit">
                        <span class="icon-search css-searchicon"></span>&nbsp;Search
                      </button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="provider-wrap hir-comp">
    <h1 class="logo-headline">We search these providers so you don't have to.</h1>
    <div class="providers-box">
      <div class="logo-container">
        <img src="../img/providers/airbnb_hp.png" alt="Airbnb Logo">
      </div>
      <div class="logo-container">
        <img src="../img/providers/blablacar_hp.png" alt="BlaBlaCar Logo">
      </div>
      <div class="logo-container">
        <img src="../img/providers/9flats_hp.png" alt="9Flats Logo">
      </div>
      <div class="logo-container">
        <img src="../img/providers/flipkey_hp.png" alt="FlipKey Logo">
      </div>
      <div class="logo-container">
        <img src="../img/providers/interhome_hp.png" alt="Interhome Logo">
      </div>
      <div class="logo-container">
        <img src="../img/providers/roomorama_hp.png" alt="Roomorama Logo">
      </div>
      <div class="logo-container">
        <img src="../img/providers/waytostay_hp.png" alt="WayToStay Logo">
      </div>
      <div class="logo-container">
        <img src="../img/providers/craigslist_hp.png" alt="Craigslist Logo">
      </div>
      <div class="logo-container">
        <img src="../img/providers/kangaride_hp.png" alt="Kangaride Logo">
      </div>
      <div class="logo-container">
        <img src="../img/providers/ridejoy_hp.png" alt="Ridejoy Logo">
      </div>
      <div class="logo-container">
        <img src="../img/providers/ridester_hp.png" alt="Ridester Logo">
      </div>
      <div class="logo-container">
        <img src="../img/providers/zimride_hp.png" alt="Zimride Logo">
      </div>
      <div class="logo-container">
        <img src="../img/providers/geronimo_hp.png" alt="Geronimo Logo">
      </div>
      <div class="logo-container">
        <img src="../img/providers/holidayvelvet_hp.png" alt="Holiday-Velvet Logo">
      </div>
      <div class="logo-container">
        <img src="../img/providers/homeaway_hp.png" alt="HomeAway Logo">
      </div>
      <div class="logo-container">
        <img src="../img/providers/niumba_hp.png" alt="Niumba Logo">
      </div>
      <div class="logo-container">
        <img src="../img/providers/bedycasa_hp.png" alt="BedyCasa Logo">
      </div>
      <div class="logo-container">
        <img src="../img/providers/theotherhome.png" alt="TheOtherHome Logo">
      </div>
    </div>
  </div>
</div>
<script>
  $(function() {
    var resizeLanding = function() {
      var bgheight = $(window).height() - 52;
      var centerLanding = Math.round(bgheight / 3) - 50;
      $('#main-head').css("height", bgheight);
      $('#marketing-titles').css("padding-top", centerLanding);
    };

    var customRange = function customRange(input) {
      var minDate;
      var id = input.id;
      var startDateVal = "";
      if (id === 'sl-hou-edate-input') {
        startDateVal = $hou_sdate.val();
      } else if (id === 'sl-rid-edate-input') {
        startDateVal = $rid_sdate.val();
      }
      if (id === 'sl-hou-edate-input' || id === 'sl-rid-edate-input') {
        if (startDateVal) {
          minDate = new Date(startDateVal);
          minDate.setDate(minDate.getDate() + 1);
          return {
            minDate: minDate
          };
        } else {
          return {
            minDate: 1
          };
        }
      }
    };

    var geoPromise = Outpost.helpers.ipToGeo();

    var optionsCities = {
      types: ['(cities)']
    };

    var optionsCountry = {
      types: ["(regions)"]
    };

    $('.pac-container').remove();

    var houDestInput = document.getElementById('sl-hou-dest-location-input');
    var ridOrigInput = document.getElementById('sl-rid-orig-location-input');
    var ridDestInput = document.getElementById('sl-rid-dest-location-input');
    var expDestInput = document.getElementById('sl-exp-dest-location-input');

    var houDestTA = new google.maps.places.Autocomplete(houDestInput, optionsCountry);
    var ridOrigTA = new google.maps.places.Autocomplete(ridOrigInput, optionsCities);
    var ridDestTA = new google.maps.places.Autocomplete(ridDestInput, optionsCities);
    var expDestTA = new google.maps.places.Autocomplete(expDestInput, optionsCities);

    var $hou_sdate = $('#sl-hou-sdate-input');
    var $hou_edate = $('#sl-hou-edate-input');
    var $rid_sdate = $('#sl-rid-sdate-input');

    $hou_sdate.datepicker({
      minDate: 0,
      inline: true,
      numberOfMonths: 2,
      onClose: function(selectedDate) {
        $hou_edate.focus();
      }
    });

    $hou_edate.datepicker({
      inline: true,
      numberOfMonths: 2,
      beforeShow: customRange,
      onClose: function() {
        $('#sl-hou-guest-input').focus();
      }
    });

    $rid_sdate.datepicker({
      minDate: 0,
      inline: true,
      numberOfMonths: 2,
      onClose: function(selectedDate) {
        $('#sl-rid-guest-input').focus();
      }
    });


    google.maps.event.addListener(houDestTA, 'place_changed', function() {
      if ($hou_sdate.is(':visible')) {
        $hou_sdate.focus();
      } else {
        $('#hou-searchIt').click();
      }
    });
    google.maps.event.addListener(ridOrigTA, 'place_changed', function() {
      ridDestInput.focus();
    });
    google.maps.event.addListener(ridDestTA, 'place_changed', function() {
      if ($rid_sdate.is(':visible')) {
        $rid_sdate.focus();
      } else {
        $('#rid-searchIt').click();
      }
    });
    google.maps.event.addListener(expDestTA, 'place_changed', function() {
      $('#exp-searchIt').click();
    });

    geoPromise.done(function(data) {
      var origLocation = data.location;
      if (data.city) {
        $(ridOrigInput).val(origLocation);
        $(ridDestInput).focus();
      } else {
        $(ridOrigInput).focus();
      }
    });

    $([houDestInput, ridOrigInput, ridDestInput, expDestInput]).on("click", function(){
      $(this).val("");
    });

    $(window).resize(function() {
      resizeLanding();
    });

    resizeLanding();
  });
</script>
