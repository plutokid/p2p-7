<!-- Landing hero header -->
<div id="landingpage">
  <div class="main-head">
    <h3 class="text-center top">Find Rideshares, Place Rentals, and Local Guides <br> from people all around the world.</h3>
    <!-- Main form -->
    <div class="css-main-search" id="js-firstSearch">
      <div class="inner-search">
        <div class="search-bar-wrapper">
          <form class="form-inline" id="js-searchForm">
            <div class="inner-form row-fluid">
              <input class="css-input-sea" id="ho-orig-location-input" type="search" placeholder="Departure city">
              <span class="ho-arrow">â†’</span>
              <input class="css-input-sea" id="js-dest-location-input" type="search" autocomplete="off" placeholder="Destination city">
              <button class="btn btn-info css-searchit" id="searchIt" type="submit">
                <span class="icon-search css-searchicon"></span>&nbsp;Search
              </button>
              <div class="css-ortext">or</div>
              <div class="mobile-whats">
                <a class="btn css-whataround btn-danger" id="js-whataround" href="javascript:void(0)">
                  <img class="geolocate-icon" src="../img/icon-target.png" alt="geolocate">
                  <span class="">What's around me ?</span>
                </a>
              </div>
              <div class="ho-more-options"  id="ho-more-options">
                <a class="more-options" id="more-options" href="javascript:void(0)">More options >></a>
                <div class="ho-option-form" id="ho-option-form" style="display: none;">
                  <span class="add-on calendar-prepend"><i class="icon-calendar"></i></span>
                  <input class="input-small ho-from-date" id="ho-sdate-input" placeholder="From" type="search">
                  <span class="add-on calendar-prepend"><i class="icon-calendar"></i></span>
                  <input class="input-small ho-to-date" placeholder="To" id="ho-edate-input" type="search">
                  <select class="ho-guest-input" id="ho-guest-input">
                    <option selected disabled value="1">People</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                  </select>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  <!-- horizontal logo bar -->
  <div class="css-logo-bar">
    <div class="css-container">
      <span class="tooly logos" data-toggle="tooltip" data-placement="top" title="Reliable Rideshares &amp; Carpooling for Canada and the U.S. - Kangaride">
        <img src="../img/kangaride_logo_edited.png" alt="kangaride logo">
      </span>
      <span class="tooly logos" data-toggle="tooltip" data-placement="top" title="Ridesharing, carpooling and buses - Zimride">
        <img src="../img/zimride-final.png" alt="zimride logo">
      </span>
      <span class="tooly logos" data-toggle="tooltip" data-placement="top" title="BlaBlaCar connects drivers with empty seats and people travelling the same way - Over 3 Million trusted members saving up to 70% on inter-city travel!">
        <img src="../img/blablacar-final.png" alt="blablacar logo">
      </span>
      <span class="tooly logos" data-toggle="tooltip" data-placement="top" title="Vacation rentals, private rooms, sublets by the night - Accommodations on houserental">
        <img src="../img/airbnb_logo_edited.png" alt="houserental logo">
      </span>
      <span class="tooly logos" data-toggle="tooltip" data-placement="top" title="rideshare | Rideshare and carpool with friendly people.">
        <img src="../img/ridejoy_logo_edited.png" alt="rideshare logo">
      </span>
      <span class="tooly logos" data-toggle="tooltip" data-placement="top" title="tourism - Tours, trips and other things to do on vacation">
        <img src="../img/vayable_logo_edited.png" alt="tourism logo">
      </span>
      <span class="tooly logos" data-toggle="tooltip" data-placement="top" title="private rooms, holiday house, accommodations">
        <img src="../img/9flats-final.png" alt="9flats logo">
      </span>
    </div>
  </div>

  <div id="how-it-works" class="how-it-works">
    <h3 class="text-center hiw-header">Using Outpost is easy. Here's how it works:</h3>
    <div class="hiw-container">
      <div class="row">
        <div class="hiw-first-wrap span4 hiw-wrap">
          <div class="hiw hiw-first">
            <div class="hiw-num" style="color:#ec5f41">1</div>
            <div class="hiw-icon"><div class="icon-map-search icon-search icon-large"></div></div>
          </div>
          
          <h4 class="hiw-title">Lookup a city</h4>
          <p class="hiw-desc">Enter which city you plan to go to and hit search!</p>
        </div>

        <div class="hiw-second-wrap span4 hiw-wrap">
          <div class="hiw hiw-second">
            <div class="hiw-num" style="color:#24b0cf">2</div>

            <div class="hiw-icon"><div class="hiw icon-map-marker icon-large"></div></div>
          </div>
          <h4 class="hiw-title">One search to rule them all!</h4>
          <p class="hiw-desc">You will be presented with rideshares, location rentals and local guides on the sidebar.</p>
        </div>

        <div class="hiw-third-wrap span4 hiw-wrap">
          <div class="hiw hiw-third">
            <div class="hiw-num" style="color:#95d17b">3</div>
            <div class="hiw-icon"><img src="../img/box-car.png" alt="car icon"></div>
          </div>
          <h4 class="hiw-title">Pack up and travel</h4>
          <p class="hiw-desc">Pick a rideshare to get to your destination, meet with your host and get hooked with the hidden secrets of the city with a local guide!.</p>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
  (function() {
    function submitTheForm() {
      if ($('#js-dest-location-input').val() && $('#ho-orig-location-input').val()) {
        if ($('#ho-option-form').is(':visible')) {
          $('#ho-sdate-input').focus();
        } else {
          $('#js-searchForm').trigger("submit");
        }
      }
    }
    var geoPromise = Outpost.helpers.ipToGeo();
    var input1 = document.getElementById('ho-orig-location-input');
    var input2 = document.getElementById('js-dest-location-input');
    var options = {
      types: ['(cities)']
    };

    var autocomplete1 = new google.maps.places.Autocomplete(input1, options);
    var autocomplete2 = new google.maps.places.Autocomplete(input2, options);

    geoPromise.done(function(data) {
      var origLocation = data.location;
      if (origLocation.length > 7) {
        $('#ho-orig-location-input').val(origLocation);
        $('#js-dest-location-input').focus();
      } else {
        $('#ho-orig-location-input').focus();
      }
    });

    google.maps.event.addListener(autocomplete1, 'place_changed', function() {
      submitTheForm();
    });

    google.maps.event.addListener(autocomplete2, 'place_changed', function() {
      submitTheForm();
    });

    var $sdate = $('#ho-sdate-input');
    var $edate = $("#ho-edate-input");

    var customRange = function customRange(input) {
      var minDate;
      var startDateVal = $sdate.val();
      if (input.id === 'ho-edate-input') {
        if (startDateVal) {
          minDate = new Date(startDateVal);
          minDate.setDate(minDate.getDate() + 1);
          return {
            minDate: minDate
          };
        } else {
          return {
            minDate: 1
          };
        }
      }
    };

    $sdate.datepicker({
      minDate: 0,
      inline: true,
      numberOfMonths: 2,
      onClose: function(selectedDate) {
        $edate.focus();
      }
    });

    $edate.datepicker({
      inline: true,
      numberOfMonths: 2,
      beforeShow: customRange,
      onClose: function() {
        $('#ho-guest-input').focus();
      }
    });

  })();
</script>
